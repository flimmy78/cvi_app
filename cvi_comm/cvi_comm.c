/*******************************************************************************
 *   Revised:        All copyrights reserved to redmorningcn.
 *   Revision:       v1.0
 *   Writer:	     redmorningcn.
 *
 *   Description:
 *   Notes:
 *     				E-mail: redmorningcn@qq.com
 *
 *******************************************************************************/

/********************************************************************************************/
/* Include files																			*/
/********************************************************************************************/
#include "cvi_comm.h"

/********************************************************************************************/
/* Constants																				*/
/********************************************************************************************/

/********************************************************************************************/
/* Globals																					*/
/********************************************************************************************/

/********************************************************************************************/
/* local Prototypes																			*/
/********************************************************************************************/

/*******************************************************************************************
数据发送： 面板打信息
*******************************************************************************************/
void printftext(int	panel,int id,const char *format, ...) 
{ 
   va_list  argptr;
   unsigned int   cnt;
   char     a[255];
   
   strlen(format);
   if(strlen(format) > (sizeof(a) - 55))
   {
		return	;
   }
   va_start(argptr, format);
   
   cnt = vsprintf(a, format, argptr);
   
   va_end(argptr);
   
   SetCtrlVal(panel,id,a);
}

/*******************************************************************************************
数据发送： 字符串装换hex格式数组
*******************************************************************************************/
int	strtohex(unsigned char *str,unsigned char *buf)
{
	int		len,i,j;
	char	charbuf[4]="0";

	len = 0;											//数组长度
	
	for(i = 0,j = 0;i< strlen((unsigned char *)str) ;i++)					//数据转换	
	{
		if(str[i] == ' ')							//先去空格
		{
			continue;
		}else{
			//判断非法字符
			charbuf[j%2] = str[i];
			if(j %2 == 1)
			{
			    charbuf[2] 	= 	'\0';
				buf[len++]  = 	(unsigned char)strtol(charbuf,NULL,16);	
			}
			j++;
		}
	}
	
	return	len;
}

